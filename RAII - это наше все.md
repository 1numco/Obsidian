После введения в RAII, уже должны быть понятны преимущества использования этой идиомы над другими видами memory менеджмента. Самое главное из них - полная предсказуемость поведения захваченных ресурсов. Их цикл жизни полностью совпадает с циклом жизни объекта. И этот цикл предопределен семантикой языка, а не желанием разработчика. Цикл жизни начинается ровно на той строчке кода, где вызывается конструктор, и заканчивается при выходе из скоупа. Это конкретные места в коде и для каждого объекта можно сопоставить не только пару чисел - {строчка создания, строчка выхода из скоупа}, но и упорядочить все такие пары чисел. То есть мы можем точно сказать, какой объект был создан раньше, а какой позже. В пределах одного потока конечно. 

Кто мне скажет, что основное преимущество RAII в освобождении разработчика от обязанности контролировать удаление объекта. Это только часть правды. Да, разработчик использует raii-обертки, не беспокоится о утечках и радуется жизни. Но есть же такие вещи, как сборщики мусора. Они тоже избавляют кодеров от головной боли управления памятью, но имеют существенный недостаток. Они бьют по яйцам перформансу вашего приложения в абсолютно рандомный момент времени. Особенно неприятно это во время пиковой "полезной" нагрузки на приложение. Поэтому на плюсах нет и никогда не будет нормальной либы гарбэдж коллектора, которая будет широко использоваться. Потому что на это запроса нет. Не по плюсовому это, что-то не контролировать.

Проблемы глобальных переменных и сырых указателей как раз в том, что нет заранее предопределенного цикла жизни объекта. В одном случае этот цикл определяет компилятор или бог рандома. И в этом случае вообще хрен отловишь ошибки. А в другом случае цикл определяет разработчик, которому пельмени-то приготовить не всегда можно доверить, не то, что управление памятью.

Про обработку исключений и многопоточку я многозначно промолчу. Отсутствие raii экспоненциально усиливает головную боль разрабам в этих сферах.

Поэтому, где бы вы ни были и что не разрабатывали, RAII - ваш верный пес, которому вы будете радоваться при каждой встрече.

Stay cool.

![[Pasted image 20231102090350.png]]


