Бывают такие ситуации, когда объект владеет каким-то ресурсом единолично, то есть имеет над ним так называемый ownership. В этом случае время жизни и использования ресурса совпадает с временем жизни объекта, а использование этого же самого ресурса другим объектом будет приносить странные side effect’ы. Например у нас есть класс, который содержит файл в качестве поля и который открывает этот файл в конструкторе и закрывает в деструкторе. Что должно происходить при копировании объекта этого класса? Должен ли файл ещё раз открываться или в начале в копируемом объекте закрываться, а потом открываться в скопированном? Все варианты выглядят выстрелом в хлебало, поэтому логично запретить таким объектам копироваться.

Как это сделать? Самое популярное решение - объявить конструктор копирования и оператор присваивания приватными и жить счастливо. _Никто снаружи класса_ не сможет получить доступ к этим специальным методам, а при попытке будет ошибка компиляции. Но это только снаружи класса. Внутри класса-то можно использовать приватные поля и методы. И тут уже огромный просто для ошибок, в зависимости от того, как вы определили специальные методы. 

Такой код 

**class** **NonCopyable** {
**private**:
   NonCopyable( **const** NonCopyable& ) {}
   **void** NonCopyable::**operator**=( **const** NonCopyable& ) {}
};
**void** **NonCopyable::SomeOtherMehod**()
{
    callSomething(\*this);
}

Приведёт к вызову копирующего конструктора и копированию всех полей, что ведёт к неопределенному поведению.

Но С++11 подарил нам прекрасную фича - можно пометить любую функцию как \= delete и компилятор просто не будет генерировать код для неё. Поэтому такие функции физически не могут быть вызваны. Пометив наши методы удаленными, мы уберём возможность любой сущности их вызывать и сильно обезопасим код.

К тому же, использование этой фичи повышает читаемость кода. А так как пометить удаленной можно любую функцию, то можно удалить ненужную перегрузку или запретить вызывать функцию с ошибочным приведением параметров.

Modern C++ - сила.

Stay cool.

![[Pasted image 20231102092014.png]]